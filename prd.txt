üìÑ PRD: Dashboard Administrativo - BuscaFornecedor
Data: 14 de Janeiro de 2026 Autor: Especialista em Arquitetura de Software (Refine.dev + Supabase) Vers√£o: 1.0

1. Vis√£o Geral do Projeto
Desenvolvimento de um painel administrativo (Dashboard) "Read-Only" (apenas leitura) para a plataforma BuscaFornecedor. O objetivo √© visualizar m√©tricas de compradores e fornecedores, permitindo an√°lises granulares atrav√©s de tabelas interativas e gr√°ficos de evolu√ß√£o.

Stack Tecnol√≥gico:

Framework Frontend: Refine.dev (React).

UI Library: Ant Design (Recomendado para Refine por oferecer tabelas complexas, filtros e ordena√ß√£o nativos) ou Material UI. Design System: Azul e Branco.

Backend/Database: Supabase (PostgreSQL).

Conectividade: Data Provider do Supabase para Refine.

2. Acesso e Seguran√ßa (Cr√≠tico)
‚ö†Ô∏è Diretriz Suprema: O sistema deve operar em modo estrito de Leitura (Read-Only).

Desabilitar bot√µes de criar, editar e deletar (canCreate, canEdit, canDelete devem ser falsos ou omitidos nos recursos).

A conex√£o direta via string abaixo deve ser usada para introspec√ß√£o do esquema e configura√ß√£o inicial, mas recomenda-se o uso do supabase-js client com as credenciais p√∫blicas/anon para o frontend, configuradas com RLS (Row Level Security) se poss√≠vel.

Credenciais de Banco de Dados (Direct Connection):

Plaintext

postgresql://postgres.hccolkrnyrxcbxuuajwq:1d8vUnUlDXT7cmox@aws-0-sa-east-1.pooler.supabase.com:5432/postgres
3. Estrutura de Dados (Data Schema)
Baseado na an√°lise preliminar das tabelas solicitadas, o sistema deve mapear os seguintes recursos no Refine:

3.1. Tabelas Mapeadas
usuario_comprador: Perfil dos compradores.

Campos esperados: id, nome, email, data_cadastro, empresa.

usuario_fornecedor: Perfil dos fornecedores.

Campos esperados: id, nome_empresa, cnpj, categoria, data_cadastro.

consultas: Logs de buscas realizadas.

Campos esperados: id, id_comprador (FK), termo_busca, data_consulta.

aparicoes: Resultados gerados pelas consultas.

Campos esperados: id, id_consulta (FK), id_fornecedor (FK), score (nota de relev√¢ncia/match), data_processamento.

(Nota para o Desenvolvedor: Na Fase 1 de implementa√ß√£o, execute uma query SELECT * FROM tabela LIMIT 5 para confirmar os nomes exatos das colunas).

4. Requisitos Funcionais e Dashboards
O sistema deve ter uma navega√ß√£o lateral clara dividida entre "Vis√£o do Comprador" e "Vis√£o do Fornecedor".

4.1. Dashboard Comprador
Objetivo: Analisar o engajamento dos compradores.

KPIs (Big Numbers):

Total de Compradores Cadastrados.

Total Geral de Consultas Realizadas.

Gr√°ficos:

Novos Compradores: Linha ou Barra (Eixo X: Tempo, Eixo Y: Qtd).

Volume de Consultas: Linha ou Barra.

Filtro Temporal: Bot√µes para alternar a view entre: Di√°ria, Semanal, Mensal.

Tabela Mestre (Compradores):

Listagem completa de usuario_comprador.

Funcionalidades: Pagina√ß√£o, Filtro por coluna (ex: buscar por nome), Ordena√ß√£o.

Drill-down (Expans√£o): Ao clicar em uma linha de comprador, expandir (ou abrir modal/drawer) contendo uma sub-tabela com as √∫ltimas consultas realizadas por aquele usu√°rio (tabela consultas filtrada pelo id_comprador).

4.2. Dashboard Fornecedor
Objetivo: Analisar a visibilidade dos fornecedores na plataforma.

KPIs (Big Numbers):

Total de Fornecedores Pesquisados (Distintos na tabela aparicoes).

Tabela de Apari√ß√µes Aglutinada:

Esta tabela requer uma agrega√ß√£o de dados. Deve listar os Fornecedores e contar quantas vezes apareceram.

Colunas Calculadas (Buckets de Score):

Nome do Fornecedor.

Total Apari√ß√µes.

Qtd Score 0-10.

Qtd Score 10-25.

Qtd Score 25-50.

Qtd Score 50-70.

Qtd Score 70+.

Interatividade (Drill-down):

Ao clicar na linha de um fornecedor, exibir a lista de Consultas que geraram aquelas apari√ß√µes (Join entre aparicoes -> consultas). Isso permite ver "quem procurou o qu√™" para que este fornecedor aparecesse.

5. Requisitos de UI/UX (Refine.dev)
Tema: Azul (Primary Color) e Branco (Background). Apar√™ncia limpa, corporativa (SaaS).

Responsividade: O layout deve se adaptar a desktops e tablets.

Componente de Tabela:

Utilizar <Table> do Ant Design integrado ao Refine.

Habilitar sorter e filterDropdown em todas as colunas relevantes.

Habilitar densidade de tabela (compact/middle) para visualiza√ß√£o de muitos dados.

Colunas redimension√°veis (se a biblioteca permitir nativamente) ou com largura fixa inteligente.

6. Plano de Implementa√ß√£o (Passo a Passo para IA)
Fase 1: Setup e Reconhecimento
Inicializar projeto Refine com Vite e suporte a Supabase e Ant Design.

Configurar cliente Supabase.

A√ß√£o Cr√≠tica: Realizar fetch de 5 linhas de cada tabela (usuario_comprador, usuario_fornecedor, consultas, aparicoes) e exibir no console para mapear o esquema exato (tipagem TypeScript).

Fase 2: Constru√ß√£o dos Recursos (Resources)
Criar os recursos no Refine (buyers, suppliers, queries, appearances).

Garantir que as rotas sejam apenas list e show (bloquear create/edit).

Fase 3: Desenvolvimento Dashboard Comprador
Implementar os Cards de m√©tricas (KPIs) usando queries count.

Implementar Gr√°ficos usando recharts ou ant-design-charts.

Criar a Tabela de Compradores com funcionalidade useTable e Table.Expandable para mostrar o hist√≥rico de consultas.

Fase 4: Desenvolvimento Dashboard Fornecedor
Implementar l√≥gica de agrega√ß√£o para a "Tabela de Apari√ß√µes".

Nota T√©cnica: Se o volume de dados for alto, sugerir a cria√ß√£o de uma VIEW SQL no banco. Caso contr√°rio, realizar o fetch da tabela aparicoes, fazer o groupBy e o c√°lculo dos buckets (0-10, 10-25...) no frontend (transforma√ß√£o de dados).

Implementar o drill-down para ver as consultas originais.

Fase 5: Refinamento Visual
Aplicar a paleta de cores Azul/Branco.

Revisar responsividade.

Testar filtros e ordena√ß√µes.